import{_ as e,o as a,c as s,V as o}from"./chunks/framework.490198c0.js";const b=JSON.parse('{"title":"Procédure pour lancer un playbook Ansible avec clé privée SSH et fichier de variables chiffrées","description":"","frontmatter":{},"headers":[],"relativePath":"lancement_playbook.md","filePath":"lancement_playbook.md"}'),l={name:"lancement_playbook.md"},r=o('<h1 id="procedure-pour-lancer-un-playbook-ansible-avec-cle-privee-ssh-et-fichier-de-variables-chiffrees" tabindex="-1">Procédure pour lancer un playbook Ansible avec clé privée SSH et fichier de variables chiffrées <a class="header-anchor" href="#procedure-pour-lancer-un-playbook-ansible-avec-cle-privee-ssh-et-fichier-de-variables-chiffrees" aria-label="Permalink to &quot;Procédure pour lancer un playbook Ansible avec clé privée SSH et fichier de variables chiffrées&quot;">​</a></h1><h2 id="activation-de-l-agent" tabindex="-1">Activation de l&#39;agent <a class="header-anchor" href="#activation-de-l-agent" aria-label="Permalink to &quot;Activation de l&#39;agent&quot;">​</a></h2><p>Suivez les étapes ci-dessous pour exécuter un playbook Ansible en utilisant <code>eval &quot;$(ssh-agent)&quot;</code>, <code>ssh-add</code> pour ajouter une clé privée SSH, et un fichier de variables chiffrées avec Ansible Vault :</p><ol><li><p>Ouvrez un terminal ou une invite de commandes sur votre machine locale dans votre repertoire playbooks.</p></li><li><p>Exécutez la commande <code>eval &quot;$(ssh-agent)&quot;</code> pour démarrer l&#39;agent SSH. Cela démarrera l&#39;agent SSH sur votre machine locale.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#FFCB6B;">ssh-agent</span><span style="color:#89DDFF;">)&quot;</span></span></code></pre></div></li><li><p>Utilisez la commande <code>ssh-add</code> pour ajouter votre clé privée SSH à l&#39;agent.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh-add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/nom_de_la_clé_privée</span></span></code></pre></div><p>Assurez-vous de remplacer <code>nom_de_la_clé_privée</code> par le nom de votre propre clé privée SSH. Par exemple, si votre clé privée s&#39;appelle <code>id_rsa</code>, la commande serait <code>ssh-add ~/.ssh/id_rsa</code>.</p><p>Vous devrez saisir le mot de passe de votre clé privée SSH pour l&#39;ajouter à l&#39;agent.</p><p>Une fois ajoutée, la clé privée sera disponible pour être utilisée lors de la connexion aux serveurs distants.</p></li></ol><h2 id="lancement-du-playbok" tabindex="-1">Lancement du playbok <a class="header-anchor" href="#lancement-du-playbok" aria-label="Permalink to &quot;Lancement du playbok&quot;">​</a></h2><ol start="4"><li><p>Assurez-vous d&#39;avoir un fichier de variables chiffrées (par exemple, <code>vars/vault.yml</code>) créé à l&#39;aide d&#39;Ansible Vault.</p></li><li><p>Pour exécuter votre playbook Ansible, utilisez la commande suivante en spécifiant le fichier de variables chiffrées et en utilisant l&#39;option <code>--ask-vault-pass</code> pour demander le mot de passe du fichier chiffré :</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ansible-playbook</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inventory/hosts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">playbook.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ask-vault-pass</span></span></code></pre></div><p>Assurez-vous de remplacer <code>inventory.yml</code> par votre propre fichier d&#39;inventaire et <code>playbook.yml</code> par votre propre playbook.</p></li><li><p>Lorsque vous exécutez la commande, Ansible vous demandera le mot de passe du fichier chiffré. Entrez le mot de passe contenu dans le fichier <code>vault_pass.yaml</code> que vous avez créé.</p><blockquote><p>Note : Assurez-vous de protéger correctement la clé privée SSH et le fichier de mot de passe du fichier chiffré pour garantir la sécurité de vos systèmes et données sensibles.</p></blockquote></li><li><p>Ansible exécutera le playbook en utilisant la clé privée SSH ajoutée à l&#39;agent et utilisera les variables chiffrées du fichier <code>vault.yml</code> pendant l&#39;exécution.</p></li></ol><p>Ceci conclut la procédure pour lancer un playbook Ansible en utilisant <code>eval &quot;$(ssh-agent)&quot;</code> et un fichier de variables chiffrées avec Ansible Vault.</p>',7),t=[r];function n(i,c,p,d,u,v){return a(),s("div",null,t)}const m=e(l,[["render",n]]);export{b as __pageData,m as default};
